{% extends "base.html" %}
{% block title %}Upload Results{% endblock %}

{% block content %}
{% from 'partials/macros.html' import steps_bar, page_heading %}
{{ steps_bar(6) }}

{{ page_heading('Upload Complete', 'Here\'s a summary of your upload results.') }}

{# ── Summary stats ── #}
<div class="results-summary mb-6">
    <div class="stat-box total">
        <span class="stat-num">{{ total }}</span>
        <span class="stat-label">Total</span>
    </div>
    <div class="stat-box success">
        <span class="stat-num">{{ success_count }}</span>
        <span class="stat-label">Uploaded</span>
    </div>
    <div class="stat-box error">
        <span class="stat-num">{{ total - success_count }}</span>
        <span class="stat-label">Failed</span>
    </div>
</div>

{# ── Per-file results ── #}
<ul class="result-list">
    {% for r in results %}
    <li class="result-item {{ 'success' if r.success else 'error' }}">
        <div class="result-icon">{{ '✅' if r.success else '❌' }}</div>
        <div class="result-detail">
            <div class="result-filename">{{ r.filename }}</div>
            {% if r.success %}
            <div class="result-msg">Uploaded successfully to Wikimedia Commons.</div>
            {% if r.url %}
            <a href="{{ r.url }}" target="_blank" rel="noopener" class="result-link">
                View on Commons →
            </a>
            {% endif %}
            {% else %}
            <div class="result-msg" style="color:var(--error);">{{ r.error }}</div>
            {% endif %}
        </div>
    </li>
    {% endfor %}
</ul>

<div class="flex-center mt-8">
    <a href="{{ url_for('gallery.select_domain') }}" class="btn btn-secondary">Upload More</a>
    <a href="{{ url_for('main.index') }}" class="btn btn-primary">← Home</a>
</div>
{% endblock %}