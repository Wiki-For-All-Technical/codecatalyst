{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<div class="hero hero-compact fade-in">

    {# â”€â”€ Heading (smaller) â”€â”€ #}
    <h1 class="hero-title hero-title-sm">
        Upload photos to <span class="grad">Wikimedia Commons</span>
    </h1>

    <p class="hero-sub hero-sub-sm">
        Move images from Google Drive or Photos to Wikipedia's media library.
    </p>

    {# â”€â”€ How it Works (3 steps) â”€â”€ #}
    <div class="how-it-works how-it-works-sm fade-in">
        <div class="how-step">
            <div class="step-icon-box step-icon-sm">ğŸ”‘</div>
            <div class="step-badge">1</div>
            <div class="step-text">Login to Wikimedia Commons</div>
        </div>
        <div class="how-step">
            <div class="step-icon-box step-icon-sm">ğŸ–¼ï¸</div>
            <div class="step-badge">2</div>
            <div class="step-text">Pick photos from Google Drive / Photos</div>
        </div>
        <div class="how-step">
            <div class="step-icon-box step-icon-sm">ğŸ“¤</div>
            <div class="step-badge">3</div>
            <div class="step-text">Upload to Wikimedia Commons</div>
        </div>
    </div>

    {# â”€â”€ CTA area â”€â”€ #}
    <div class="hero-actions">
        {% if google_logged_in and wiki_logged_in %}
        <div class="flex-center" style="flex-direction:column;gap:8px;">
            <p class="text-muted" style="font-size:0.85rem;">
                Connected as <strong>{{ wiki_username or 'Wikimedia User' }}</strong>
            </p>
            <a href="{{ url_for('gallery.select_domain') }}" class="btn btn-primary btn-lg">
                ğŸ“‚ Start Uploading â†’
            </a>
        </div>

        {% else %}
        {# -- Terms compact box + checkbox + login button -- #}
        <div class="terms-block">

            <div class="card terms-notice-card terms-notice-compact">
                <h4>Data Collection / Terms of Use</h4>
                <p>By using this project, you agree that any private information may be made publicly
                    available and not treated as confidential. Volunteer administrators will have access
                    to data you submit (IP address, username, etc.) and are bound by
                    <a href="https://wikitech.wikimedia.org/wiki/Wikitech:Cloud_Services_Terms_of_use"
                        target="_blank">Wikimedia Cloud Services Terms of Use</a>.
                </p>
                <p><a href="{{ url_for('main.terms') }}">Full Terms of Use</a> &middot;
                    <a href="{{ url_for('main.privacy') }}">Privacy Policy</a>
                </p>
            </div>

            {# Checkbox sits directly below the box #}
            <div class="privacy-check-container">
                <input type="checkbox" id="privacy-check" onchange="toggleLoginBtn()">
                <label for="privacy-check">
                    I've read and accept the <a href="{{ url_for('main.privacy') }}" target="_blank">Privacy Policy</a>
                </label>
            </div>

            <div id="login-actions" class="login-actions-wrap">
                {% if google_logged_in %}
                <a href="{{ url_for('upload.wiki_prompt') }}" class="btn btn-primary btn-lg">
                    ğŸŒ Connect Wikimedia Commons
                </a>
                {% else %}
                <a href="{{ url_for('main.google_login') }}" class="btn btn-google btn-lg">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="18" height="18"
                        alt="Google">
                    Continue with Google
                </a>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>

    {# â”€â”€ Feature cards â”€â”€ #}
    <div class="hero-features hero-features-sm">
        <div class="feature-card">
            <div class="feature-icon">âœ¨</div>
            <div class="feature-title">Fast & Easy</div>
            <div class="feature-desc">Batch-upload multiple images with metadata in minutes.</div>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ›¡ï¸</div>
            <div class="feature-title">Secure</div>
            <div class="feature-desc">OAuth 2.0 â€” we never see your passwords.</div>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ†“</div>
            <div class="feature-title">Free & Open</div>
            <div class="feature-desc">Open-source, built for the Wikimedia community.</div>
        </div>
    </div>

</div>
{% endblock %}

{% block scripts %}
<script>
    function toggleLoginBtn() {
        const ok = document.getElementById('privacy-check').checked;
        const wrap = document.getElementById('login-actions');
        wrap.classList.toggle('enabled', ok);
    }
</script>
{% endblock %}